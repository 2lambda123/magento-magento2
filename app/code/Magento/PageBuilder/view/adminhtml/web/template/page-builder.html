<!--
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */
-->
<div class="pagebuilder-stage-wrapper"
     css="Object.assign(
        {'stage-full-screen': isFullScreen, 'stage-content-snapshot': isSnapshot, 'transition-out': isSnapshotTransition, 'stage-is-active': (!isSnapshot() || isFullScreen)},
        viewportClasses)"
     ko-style="wrapperStyles">
    <div class="admin__field pagebuilder-header"
         css="visible: panel.isVisible(), 'transition-out': isSnapshotTransition()"
         if="!isSnapshot()">
        <span class="viewport-buttons">
            <each args="data: Object.keys(viewports), as: 'name'">
                <button type="button"
                        class="page-builder-viewport"
                        css="$parent.viewports[name].button"
                        disable="name === $parent.viewport()"
                        click="$parent.toggleViewport.bind($parent, name)">
                    <img data-bind="attr:{src: require.toUrl($parent.viewports[name].icon)}" draggable="false" aria-hidden="true"/>
                </button>
            </each>
        </span>
        <span class="template-buttons">
            <button type="button" translate="'Apply Template'" if="isAllowedTemplateApply" click="toggleTemplateManger"/>
            <button type="button" translate="'Save as Template'" if="isAllowedTemplateSave" click="saveAsTemplate"/>
            <i click="toggleFullScreen.bind($data, {animate:true})"
               css="'icon-pagebuilder-fullscreen': !isFullScreen(), 'icon-pagebuilder-fullscreen-exit': isFullScreen()"
               attr="{title: isFullScreen() ? $t('Close Full Screen') : $t('Open in Full Screen')}">
            </i>
        </span>
    </div>
    <with args="panel">
        <render/>
    </with>
    <if args="isStageReady">
        <with args="stage">
            <render/>
        </with>
        <iframe width="1" height="1" attr="id: 'render_frame_' + id" sandbox="allow-scripts" style="display: none;"></iframe>
    </if>
</div>
