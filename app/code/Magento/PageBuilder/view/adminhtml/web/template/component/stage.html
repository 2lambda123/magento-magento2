<!--
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */
-->

<div class="admin__field" style="text-align: right">
    <button data-bind="text: $t('Template Manager'), click: function() { stage.openTemplateManager(); }"></button>
    <i data-bind="click: function() { stage.goFullScreen(); }, css: {'icon-pagebuilder-fullscreen': !isFullScreen(), 'icon-pagebuilder-fullscreen-exit': isFullScreen()}"></i>
</div>
<br />

<!-- ko with: panel -->
    <!-- ko template: getTemplate() --><!-- /ko -->
<!-- /ko -->

<div class="pagebuilder-stage" data-bind="attr: {id: stageId, 'data-role': stageActive() ? 'pagebuilder-stage' : '' }, css: {'pagebuilder-show-borders': showBorders, 'pagebuilder-no-user-select': !userSelect(), 'panel-collapsed': panel.isCollapsed, 'dragging': dragging}">
    <div class="pagebuilder-stage-loading" data-bind="visible: $parent.loading">
        <div class="pagebuilder-emblem"></div>
        <p data-bind="text: $t('Please hold! we\'re just retrieving your content...')"></p>
        <span class="spinner">
           <!-- ko repeat: 8 -->
            <span data-bind="attr: {'data-repeat-index': $index}"></span>
            <!-- /ko -->
        </span>
    </div>
    <div class="pagebuilder-canvas" data-bind="css: {active: !loading()}, foreach: stageContent, sortable: { sortableClass: 'stage-container', handle: '.move-structural', items: '.pagebuilder-row-wrapper', connectWith: '.pagebuilder-canvas' }">
        <div class="pagebuilder-row-wrapper" data-bind="template: previewTemplate, attr: {id: id}, style: wrapperStyle"></div>
    </div>
</div>
