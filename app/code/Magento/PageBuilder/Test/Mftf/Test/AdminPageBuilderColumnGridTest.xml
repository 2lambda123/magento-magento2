<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->

<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="../../../../../../../dev/tests/acceptance/vendor/magento/magento2-functional-testing-framework/src/Magento/FunctionalTestingFramework/Test/etc/testSchema.xsd">
    <test name="ValidateGridDefaultSizeOnStage">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Verify default grid size"/>
            <description value="Verify the default grid size (12) is set correctly within the stage."/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2280"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <comment userInput="Validate default grid size on initial drop" stepKey="commentValidateInitial"/>
        <actionGroup ref="openGridSizeForm" stepKey="openGridSizeForm" />
        <seeInField selector="{{PageBuilderColumnSection.gridSizeInput('1')}}" userInput="{{PageBuilderGridSize.defaultGridSize}}" stepKey="seeDefaultGridSize"/>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        <comment userInput="Validate default grid size after save" stepKey="commentValidateAfterSave"/>
        <actionGroup ref="openGridSizeForm" stepKey="openGridSizeFormAfterSave" />
        <seeInField selector="{{PageBuilderColumnSection.gridSizeInput('1')}}" userInput="{{PageBuilderGridSize.defaultGridSize}}" stepKey="seeDefaultGridSizeAfterSave"/>
    </test>
    <test name="ValidateGridInputFocusedOnOpen">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Verify input is auto focused"/>
            <description value="Verify when the grid form is opened the field is focused"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2281"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <comment userInput="Validate input is focused" stepKey="commentValidateInitial"/>
        <actionGroup ref="openGridSizeForm" stepKey="openGridSizeForm" />
        <executeJS function="return window.getSelection().toString();" stepKey="getSelectedTextFromWindow"/>
        <assertEquals stepKey="assertSelectionIsDefaultGridSize">
            <expectedResult type="variable">getSelectedTextFromWindow</expectedResult>
            <actualResult type="string">{{PageBuilderGridSize.defaultGridSize}}</actualResult>
        </assertEquals>
    </test>
    <test name="SetDefaultGridSize14">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Set the grid size to 14"/>
            <description value="Set the grid size to 14 and validate columns width doesn't change"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2281"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('1')}}').clientWidth" stepKey="columnOneWidthGrid12"/>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('2')}}').clientWidth" stepKey="columnTwoWidthGrid12"/>
        <actionGroup ref="updateGridSize" stepKey="updateGridSizeTo14">
            <argument name="gridSize" value="14"/>
        </actionGroup>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('1')}}').clientWidth" stepKey="columnOneWidthGrid14"/>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('2')}}').clientWidth" stepKey="columnTwoWidthGrid14"/>
        <comment userInput="Validate first column unchanged" stepKey="commentValidateFirstCommentUnchanged"/>
        <assertEquals stepKey="assertFirstColumnsWidth">
            <expectedResult type="variable">columnOneWidthGrid12</expectedResult>
            <actualResult type="variable">columnOneWidthGrid14</actualResult>
        </assertEquals>
        <comment userInput="Validate second column unchanged" stepKey="commentValidateSecondCommentUnchanged"/>
        <assertEquals stepKey="assertSecondColumnsWidth">
            <expectedResult type="variable">columnTwoWidthGrid12</expectedResult>
            <actualResult type="variable">columnTwoWidthGrid14</actualResult>
        </assertEquals>
    </test>
    <test name="SetDefaultGridSize7">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Set the grid size to 7"/>
            <description value="Set the grid size to 14 and validate columns adjust to fit new grid size"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2283"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('1')}}').clientWidth" stepKey="columnOneWidthGrid12"/>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('2')}}').clientWidth" stepKey="columnTwoWidthGrid12"/>
        <actionGroup ref="updateGridSize" stepKey="updateGridSizeTo14">
            <argument name="gridSize" value="7"/>
        </actionGroup>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('1')}}').clientWidth" stepKey="columnOneWidthGrid7"/>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('2')}}').clientWidth" stepKey="columnTwoWidthGrid7"/>
        <comment userInput="Validate first column grew larger" stepKey="commentValidateFirstCommentUnchanged"/>
        <assertGreaterThan stepKey="assertOriginalWidthGreaterThanNewWidth">
            <expectedResult type="variable">columnOneWidthGrid12</expectedResult>
            <actualResult type="variable">columnOneWidthGrid7</actualResult>
        </assertGreaterThan>
        <comment userInput="Validate second column shrunk" stepKey="commentValidateSecondCommentUnchanged"/>
        <assertLessThan stepKey="assertOriginalWidthLessThanNewWidth">
            <expectedResult type="variable">columnTwoWidthGrid12</expectedResult>
            <actualResult type="variable">columnTwoWidthGrid7</actualResult>
        </assertLessThan>
        <seeElement selector="{{PageBuilderColumnSection.displayLabel('1','4/7')}}" stepKey="checkWidthFirstColumn"/>
        <seeElement selector="{{PageBuilderColumnSection.displayLabel('2','3/7')}}" stepKey="checkWidthSecondColumn"/>
    </test>
    <test name="SetDefaultGridSize1">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Set the grid size to 1"/>
            <description value="Set grid size to 1 validate empty column is removed and single 100% column persists"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2284"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="updateGridSize" stepKey="updateGridSizeTo1">
            <argument name="gridSize" value="1"/>
        </actionGroup>
        <seeNumberOfElements selector="{{PageBuilderColumnSection.allColumns}}" userInput="1" stepKey="seeNumberOfColumns1"/>
        <seeElement selector="{{PageBuilderColumnSection.displayLabel('1','1/1')}}" stepKey="validateSingleColumnOfFullWidth"/>
    </test>
    <test name="ValidateGridSizeFormDisablesStage">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Set the grid size to 1"/>
            <description value="Set grid size to 1 validate empty column is removed and single 100% column persists"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2284"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragAdditionalRow">
            <argument name="contentType" value="PageBuilderRowContentType"/>
        </actionGroup>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="openGridSizeForm" stepKey="openGridSizeForm" />
        <comment userInput="Validate column options dont display" stepKey="commentColumnOptionsHidden"/>
        <moveMouseOver selector="{{PageBuilderColumnSection.columnX('2')}}" x="10" y="10" stepKey="moveMouseOverColumn" />
        <waitForPageLoad stepKey="waitForAnimations" />
        <dontSee selector="{{PageBuilderActionsSection.contentTypeOptionsMenuByIndex(PageBuilderColumnContentType.role, '2')}}" stepKey="dontSeeColumnOptions" />
        <waitForElementNotVisible selector="{{PageBuilderActionsSection.contentTypeOptionsMenuByIndex(PageBuilderColumnContentType.role, '2')}}" stepKey="notVisibleColumnOptions" />
        <comment userInput="Validate row options dont display" stepKey="commentRowOptionsHidden"/>
        <moveMouseOver selector="{{PageBuilderActionsSection.contentTypeInStageByIndex(PageBuilderRowContentType.role, '2')}}" x="10" y="10" stepKey="moveMouseOverRow" />
        <waitForPageLoad stepKey="waitForRowAnimations" />
        <dontSee selector="{{PageBuilderActionsSection.contentTypeOptionsMenuByIndex(PageBuilderRowContentType.role, '2')}}" stepKey="dontSeeRowOptions" />
        <comment userInput="Close grid form and check options are restored" stepKey="commentCloseAndValidateOptionsAreRestored"/>
        <actionGroup ref="closeGridSizeForm" stepKey="closeGridForm" />
        <moveMouseOver selector="{{PageBuilderActionsSection.contentTypeInStage(PageBuilderRowContentType.role)}}" x="10" y="0" stepKey="onMouseOverContentTypeStage"/>
        <waitForPageLoad stepKey="waitForPageLoad"/>
        <waitForElementVisible time="10" selector="{{PageBuilderActionsSection.contentTypeOptionsMenu(PageBuilderRowContentType.role)}}" stepKey="waitForOptions"/>
    </test>
    <test name="ValidateUnfocusUpdatesGrid">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Unfocus updates grid"/>
            <description value="Checks if unfocusing / clicking out of the column group updates the grid size"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2286"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="openGridSizeForm" stepKey="openGridSizeForm" />
        <fillField selector="{{PageBuilderColumnSection.gridSizeInput('1')}}" userInput="8" stepKey="enterGridSize"/>
        <actionGroup ref="closeGridSizeForm" stepKey="closeGridFormByClicking" />
        <waitForElementNotVisible selector="{{PageBuilderColumnSection.gridSizeInput('1')}}" stepKey="waitForGridFormNotVisible" />
        <seeElement selector="{{PageBuilderColumnSection.displayLabel('1','4/8')}}" stepKey="checkWidthFirstColumn"/>
        <seeElement selector="{{PageBuilderColumnSection.displayLabel('2','4/8')}}" stepKey="checkWidthSecondColumn"/>
    </test>
    <test name="ValidateEmptyColumnsDeletedOnSmallerGridSize">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Set grid size smaller to remove column"/>
            <description value="Check if empty columns will be deleted when reducing the grid size under the amount of columns"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2287"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
            <group value="pagebuilder-divider"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="dragContentTypeToContainer" stepKey="dragIntoStage">
            <argument name="contentType" value="PageBuilderDividerContentType"/>
            <argument name="containerTargetType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="duplicateContentType" stepKey="duplicateColumn">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
            <argument name="targetIndex" value="1"/>
            <argument name="expectedIndex" value="2"/>
        </actionGroup>
        <actionGroup ref="duplicateContentType" stepKey="duplicateColumn2">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
            <argument name="targetIndex" value="1"/>
            <argument name="expectedIndex" value="2"/>
        </actionGroup>
        <seeNumberOfElements selector="{{PageBuilderColumnSection.allColumns}}" userInput="4" stepKey="seeNumberOfColumns4"/>
        <actionGroup ref="updateGridSize" stepKey="updateGridSizeTo1">
            <argument name="gridSize" value="3"/>
        </actionGroup>
        <seeNumberOfElements selector="{{PageBuilderColumnSection.allColumns}}" userInput="3" stepKey="seeNumberOfColumns3"/>
    </test>
    <test name="ValidateDefaultAndMaxGridSizesInSystemConfig">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Verify the default grid size and max size in system config"/>
            <description value="Verify the default grid size and max size in system config"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2291"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="navigateToAdminContentManagementPage" stepKey="navigateToAdminContentManagementPage"/>
        <conditionalClick stepKey="expandAdvancedContentTools" selector="{{ContentManagementSection.PageBuilderOptions}}" dependentSelector="{{ContentManagementSection.CheckIfPageBuilderTabExpanded}}" visible="true"/>
        <!-- see correct default grid size and max size -->
        <comment userInput="Verify Default Grid Size and Maximum Grid Size" stepKey="comment"/>
        <seeInField selector="{{ContentManagementSection.ColumnGridDefaultInputField}}" userInput="{{PageBuilderGridSize.defaultGridSize}}" stepKey="seeDefaultGridSize"/>
        <seeInField selector="{{ContentManagementSection.ColumnGridMaxInputField}}" userInput="{{PageBuilderGridSize.defaultMaxGridSize}}" stepKey="seeMaxGridSize"/>
    </test>
    <test name="ValidateGridSettingsValidationInSystemConfig">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Verify you cannot set the grid default size higher than the max size."/>
            <description value="Verify you cannot set the grid default size higher than the max size."/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2293"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="navigateToAdminContentManagementPage" stepKey="navigateToAdminContentManagementPage"/>
        <conditionalClick stepKey="expandAdvancedContentTools" selector="{{ContentManagementSection.PageBuilderOptions}}" dependentSelector="{{ContentManagementSection.CheckIfPageBuilderTabExpanded}}" visible="true"/>
        <conditionalClick stepKey="uncheckUseSystemValueDefault" selector="{{ContentManagementSection.UseSystem('column_grid_default')}}" dependentSelector="{{ContentManagementSection.UseSystemChecked('column_grid_default')}}" visible="true"/>
        <conditionalClick stepKey="uncheckUseSystemValueMax" selector="{{ContentManagementSection.UseSystem('column_grid_max')}}" dependentSelector="{{ContentManagementSection.UseSystemChecked('column_grid_max')}}" visible="true"/>
        <comment userInput="Enter Invalid Default Grid Size" stepKey="comment1"/>
        <actionGroup ref="updateDefaultGridSizeConfig" stepKey="enterInvalidDefaultGridSize">
            <argument name="gridSize" value="{{PageBuilderGridSize.gridSize_50}}"/>
        </actionGroup>
        <actionGroup ref="saveStoreConfiguration" stepKey="saveStoreConfiguration1"/>
        <waitForElementVisible selector="{{ContentManagementSection.ColumnGridDefaultInputFieldError}}" stepKey="waitForInvalidDefaultGridSizeErrorMessage"/>
        <see selector="{{ContentManagementSection.ColumnGridDefaultInputFieldError}}" userInput="{{PageBuilderGridSize.invalidDefaultGridSizeErrorMessage}}" stepKey="seeInvalidDefaultGridSizeErrorMessage"/>
        <comment userInput="Enter Valid Default Grid Size" stepKey="comment2"/>
        <actionGroup ref="updateDefaultGridSizeConfig" stepKey="enterValidDefaultGridSize">
            <argument name="gridSize" value="{{PageBuilderGridSize.gridSize_6}}"/>
        </actionGroup>
        <actionGroup ref="saveStoreConfiguration" stepKey="saveStoreConfiguration2"/>
        <see selector="{{ContentManagementSection.StoreConfigurationPageSuccessMessage}}" userInput="You saved the configuration." stepKey="seeSuccessMessage1"/>
        <comment userInput="Enter Invalid Maxiimum Grid Size" stepKey="comment3"/>
        <actionGroup ref="updateMaxGridSizeConfig" stepKey="enterInvalidMaxGridSize">
            <argument name="gridSize" value="{{PageBuilderGridSize.gridSize_3}}"/>
        </actionGroup>
        <actionGroup ref="saveStoreConfiguration" stepKey="saveStoreConfiguration3"/>
        <waitForElementVisible selector="{{ContentManagementSection.ColumnGridDefaultInputFieldError}}" stepKey="waitForInvalidMaxGridSizeErrorMessage"/>
        <see selector="{{ContentManagementSection.ColumnGridDefaultInputFieldError}}" userInput="{{PageBuilderGridSize.invalidDefaultGridSizeErrorMessage}}" stepKey="seeInvalidMaxGridSizeErrorMessage"/>
        <comment userInput="Enter Valid Maximum Grid Size" stepKey="comment4"/>
        <actionGroup ref="updateMaxGridSizeConfig" stepKey="enterValidMaxGridSize">
            <argument name="gridSize" value="{{PageBuilderGridSize.gridSize_32}}"/>
        </actionGroup>
        <actionGroup ref="saveStoreConfiguration" stepKey="saveStoreConfiguration4"/>
        <see selector="{{ContentManagementSection.StoreConfigurationPageSuccessMessage}}" userInput="You saved the configuration." stepKey="seeSuccessMessage2"/>
        <comment userInput="Restore Default Values for Default and Maximum Grid Size" stepKey="comment5"/>
        <click selector="{{ContentManagementSection.UseSystem('column_grid_default')}}" stepKey="restoreDefaultGridSize" />
        <click selector="{{ContentManagementSection.UseSystem('column_grid_max')}}" stepKey="restoreDefaultMaxGridSize" />
        <actionGroup ref="saveStoreConfiguration" stepKey="saveStoreConfiguration5"/>
        <see selector="{{ContentManagementSection.StoreConfigurationPageSuccessMessage}}" userInput="You saved the configuration." stepKey="seeSuccessMessage3"/>
    </test>
    <test name="ValidateResizeOnUnevenGrid">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Verify we can resize columns on uneven grid sizes"/>
            <description value="Verify we can resize columns on uneven grid sizes"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2295"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="duplicateContentType" stepKey="duplicateColumn">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
            <argument name="targetIndex" value="1"/>
            <argument name="expectedIndex" value="2"/>
        </actionGroup>
        <seeNumberOfElements selector="{{PageBuilderColumnSection.allColumns}}" userInput="3" stepKey="seeNumberOfColumns3"/>
        <actionGroup ref="updateGridSize" stepKey="updateGridSizeTo7">
            <argument name="gridSize" value="7"/>
        </actionGroup>
        <seeNumberOfElements selector="{{PageBuilderColumnSection.allColumns}}" userInput="3" stepKey="seeNumberOfColumnsStill3"/>
        <actionGroup ref="closeGridSizeForm" stepKey="closeGridSizeForm"/>
        <comment userInput="Resize Column 1" stepKey="comment1"/>
        <!-- Grab grid guide location for column 1 -->
        <comment userInput="Grab grid guide width" stepKey="context0"/>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnResizeGridLine('5')}}').clientWidth" stepKey="guideWidth"/>
        <dragAndDrop selector1="{{PageBuilderColumnSection.columnX('1')}} {{PageBuilderColumnSection.columnResizeHandle}}" selector2="{{PageBuilderColumnSection.columnResizeGridLine('5')}}" x="$guideWidth" stepKey="resizeColumn1"/>
        <seeNumberOfElements selector="{{PageBuilderColumnSection.allColumns}}" userInput="3" stepKey="seeNumberOfColumnsStill32"/>
        <seeElement selector="{{PageBuilderColumnSection.displayLabel('1','5/7')}}" stepKey="checkWidthFirstColumn"/>
    </test>
    <test name="ValidateResizeHistory">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Verify when changing back to previous grid size the original division is restored."/>
            <description value="Verify when changing back to previous grid size the original division is restored."/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2296"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('1')}}').clientWidth" stepKey="columnOneWidthGrid12"/>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('2')}}').clientWidth" stepKey="columnTwoWidthGrid12"/>
        <assertEquals stepKey="assertColumnsAreEqual">
            <expectedResult type="variable">columnOneWidthGrid12</expectedResult>
            <actualResult type="variable">columnTwoWidthGrid12</actualResult>
        </assertEquals>
        <actionGroup ref="updateGridSize" stepKey="updateGridSizeTo13">
            <argument name="gridSize" value="13"/>
        </actionGroup>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('1')}}').clientWidth" stepKey="columnOneWidthGrid13"/>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('2')}}').clientWidth" stepKey="columnTwoWidthGrid13"/>
        <comment userInput="Validate first column grew larger" stepKey="commentValidateFirstCommentUnchanged"/>
        <assertGreaterThan stepKey="assertColumnOneGreaterThanColumnTwo">
            <expectedResult type="variable">columnTwoWidthGrid13</expectedResult>
            <actualResult type="variable">columnOneWidthGrid13</actualResult>
        </assertGreaterThan>
        <fillField selector="{{PageBuilderColumnSection.gridSizeInput('1')}}" userInput="12" stepKey="resetGridSizeTo12"/>
        <pressKey selector="{{PageBuilderColumnSection.gridSizeInput('1')}}" parameterArray="['su',\Facebook\WebDriver\WebDriverKeys::ENTER]" stepKey="pressKeyEnter"/>
        <waitForPageLoad stepKey="waitForUpdate" />
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('1')}}').clientWidth" stepKey="columnOneWidthGrid12Restored"/>
        <executeJS function="return document.querySelector('{{PageBuilderColumnSection.columnX('2')}}').clientWidth" stepKey="columnTwoWidthGrid12Restored"/>
        <comment userInput="Validate column are equal again" stepKey="commentValidateColumnsEqual"/>
        <assertEquals stepKey="assertColumnAreEqualAgain">
            <expectedResult type="variable">columnOneWidthGrid12Restored</expectedResult>
            <actualResult type="variable">columnTwoWidthGrid12Restored</actualResult>
        </assertEquals>
    </test>
    <test name="CanAddColumnToSmallGridSize">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Verify we can add a column into a grid with a small size."/>
            <description value="Set grid size to 3, add new column, validate existence and equal widths for all columns."/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2297"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="updateGridSize" stepKey="updateGridSizeTo3">
            <argument name="gridSize" value="3"/>
        </actionGroup>
        <actionGroup ref="closeGridSizeForm" stepKey="closeGridSizeForm"/>
        <actionGroup ref="duplicateContentType" stepKey="duplicateColumn">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
            <argument name="targetIndex" value="1"/>
            <argument name="expectedIndex" value="2"/>
        </actionGroup>
        <seeNumberOfElements selector="{{PageBuilderColumnSection.allColumns}}" userInput="3" stepKey="seeNumberOfColumns3"/>
        <seeElement selector="{{PageBuilderColumnSection.displayLabel('1','1/3')}}" stepKey="checkWidthFirstColumn"/>
        <seeElement selector="{{PageBuilderColumnSection.displayLabel('2','1/3')}}" stepKey="checkWidthSecondColumn"/>
        <seeElement selector="{{PageBuilderColumnSection.displayLabel('3','1/3')}}" stepKey="checkWidthThirdColumn"/>
    </test>
    <test name="CannotAddColumnToFullSmallGridSize">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Verify we cannot add a column to a full group with a small grid size."/>
            <description value="Set grid size to 2, attempt to add additional column, validate no column added."/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2298"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="updateGridSize" stepKey="updateGridSizeTo2">
            <argument name="gridSize" value="2"/>
        </actionGroup>
        <actionGroup ref="closeGridSizeForm" stepKey="closeGridSizeForm"/>
        <actionGroup ref="duplicateContentType" stepKey="duplicateColumn">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
            <argument name="targetIndex" value="1"/>
            <argument name="expectedIndex" value="2"/>
        </actionGroup>
        <waitForElementVisible selector="{{PageBuilderActionsSection.modalOk}}" stepKey="seeCannotDuplicateColumnModal"/>
        <click selector="{{PageBuilderActionsSection.modalOk}}" stepKey="closeModal"/>
        <seeNumberOfElements selector="{{PageBuilderColumnSection.allColumns}}" userInput="2" stepKey="seeNumberOfColumns2"/>
    </test>
    <test name="ValidateMaxColumnError">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Cant set grid size above max"/>
            <description value="Checks if setting the grid size above the max prompts an error"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2299"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="openGridSizeForm" stepKey="openGridSizeForm" />
        <fillField selector="{{PageBuilderColumnSection.gridSizeInput('1')}}" userInput="50" stepKey="enterGridSize"/>
        <click selector="{{PageBuilderColumnSection.columnX('1')}}" stepKey="clickColumn" />
        <waitForPageLoad stepKey="waitForAnimation" />
        <seeElement selector="{{PageBuilderColumnSection.maxError}}" stepKey="verifyMaxError"/>
    </test>
    <test name="ValidateInvalidGridSizeError">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Cant set grid size above to invalid number"/>
            <description value="Checks if setting the grid size to negative prompts an error"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2302"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="openGridSizeForm" stepKey="openGridSizeForm" />
        <fillField selector="{{PageBuilderColumnSection.gridSizeInput('1')}}" userInput="-50" stepKey="enterGridSize"/>
        <click selector="{{PageBuilderColumnSection.columnX('1')}}" stepKey="clickColumn" />
        <waitForPageLoad stepKey="waitForAnimation" />
        <seeElement selector="{{PageBuilderColumnSection.minError}}" stepKey="verifyMinError"/>
    </test>
    <test name="ValidateDifferentGridSizePerGroup">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Set different grid sizes for multiple groups"/>
            <description value="Checks if able to set separate grid sizes for multiple column groups"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2301"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragSecondRowIntoStage">
            <argument name="contentType" value="PageBuilderRowContentType"/>
        </actionGroup>
        <actionGroup ref="dragContentTypeToContainer" stepKey="dragColumn1IntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
            <argument name="containerTargetType" value="PageBuilderRowContentType"/>
            <argument name="containerTargetIndex" value="1"/>
        </actionGroup>
        <actionGroup ref="dragContentTypeToContainer" stepKey="dragColumn2IntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
            <argument name="containerTargetType" value="PageBuilderRowContentType"/>
            <argument name="containerTargetIndex" value="2"/>
        </actionGroup>
        <actionGroup ref="updateGridSize" stepKey="updateGridSize1">
            <argument name="index" value="1"/>
            <argument name="gridSize" value="6"/>
        </actionGroup>
        <actionGroup ref="updateGridSize" stepKey="updateGridSize2">
            <argument name="index" value="2"/>
            <argument name="gridSize" value="8"/>
        </actionGroup>
    </test>
    <test name="ValidateGridPanelWontCloseWithError">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Grid open is open with error"/>
            <description value="Verify the grid panel is displayed always when an error is present"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2304"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="openGridSizeForm" stepKey="openGridSizeForm" />
        <fillField selector="{{PageBuilderColumnSection.gridSizeInput('1')}}" userInput="50" stepKey="enterInvalidGridSize"/>
        <click selector="{{PageBuilderColumnSection.columnX('1')}}" stepKey="clickColumn" />
        <waitForPageLoad stepKey="waitForAnimation" />
        <seeElement selector="{{PageBuilderColumnSection.maxError}}" stepKey="verifyMaxError"/>
        <click selector="{{PageBuilderColumnSection.columnGroup}}" stepKey="clickOtherArea"/>
        <seeElement selector="{{PageBuilderColumnSection.maxError}}" stepKey="verifyMaxError2"/>
        <fillField selector="{{PageBuilderColumnSection.gridSizeInput('1')}}" userInput="8" stepKey="enterValidGridSize"/>
        <actionGroup ref="closeGridSizeForm" stepKey="closeGridFormByClicking2" />
        <dontSeeElement selector="{{PageBuilderColumnSection.gridSizeInput('1')}}" stepKey="validatePanelClosed"/>
    </test>
    <test name="ValidateGridSizeLargerThanColumnsError">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Cant reduce grid size lower than full columns"/>
            <description value="Verify that setting the grid size lower than full columns prompts error"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2300"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="updateGridSize" stepKey="updateGridSizeTo3">
            <argument name="gridSize" value="4"/>
        </actionGroup>
        <actionGroup ref="dragContentTypeToContainer" stepKey="addColumn1">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
            <argument name="containerTargetType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="dragContentTypeToContainer" stepKey="addColumn2">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
            <argument name="containerTargetType" value="PageBuilderColumnContentType"/>
            <argument name="containerTargetIndex" value="3"/>
        </actionGroup>
        <actionGroup ref="dragContentTypeToContainer" stepKey="addText1">
            <argument name="contentType" value="PageBuilderTextContentType"/>
            <argument name="containerTargetType" value="PageBuilderColumnContentType"/>
            <argument name="containerTargetIndex" value="1"/>
        </actionGroup>
        <actionGroup ref="dragContentTypeToContainer" stepKey="addText2">
            <argument name="contentType" value="PageBuilderTextContentType"/>
            <argument name="containerTargetType" value="PageBuilderColumnContentType"/>
            <argument name="containerTargetIndex" value="2"/>
        </actionGroup>
        <actionGroup ref="dragContentTypeToContainer" stepKey="addText3">
            <argument name="contentType" value="PageBuilderTextContentType"/>
            <argument name="containerTargetType" value="PageBuilderColumnContentType"/>
            <argument name="containerTargetIndex" value="3"/>
        </actionGroup>
        <actionGroup ref="dragContentTypeToContainer" stepKey="addText4">
            <argument name="contentType" value="PageBuilderTextContentType"/>
            <argument name="containerTargetType" value="PageBuilderColumnContentType"/>
            <argument name="containerTargetIndex" value="4"/>
        </actionGroup>
        <actionGroup ref="openGridSizeForm" stepKey="openGridSizeForm" />
        <fillField selector="{{PageBuilderColumnSection.gridSizeInput('1')}}" userInput="3" stepKey="enterInvalidGridSize"/>
        <click selector="{{PageBuilderColumnSection.columnX('1')}}" stepKey="clickColumn" />
        <waitForPageLoad stepKey="waitForAnimation" />
        <seeElement selector="{{PageBuilderColumnSection.minError}}" stepKey="verifyMinError"/>
    </test>
    <test name="MoveColumnBetweenGroupsOfDifferentGridSize">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Move columns between different groups of different sizes"/>
            <description value="Verify that columns can be moved between column groups of varying grid size"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2303"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragSecondRowIntoStage">
            <argument name="contentType" value="PageBuilderRowContentType"/>
        </actionGroup>
        <actionGroup ref="dragContentTypeToContainer" stepKey="dragColumn1IntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
            <argument name="containerTargetType" value="PageBuilderRowContentType"/>
            <argument name="containerTargetIndex" value="1"/>
        </actionGroup>
        <actionGroup ref="dragContentTypeToContainer" stepKey="dragColumn2IntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
            <argument name="containerTargetType" value="PageBuilderRowContentType"/>
            <argument name="containerTargetIndex" value="2"/>
        </actionGroup>
        <actionGroup ref="updateGridSize" stepKey="updateGridSize1">
            <argument name="index" value="1"/>
            <argument name="gridSize" value="8"/>
        </actionGroup>
        <actionGroup ref="closeGridSizeForm" stepKey="closeGridFormByClicking" />
        <actionGroup ref="dragColumnToAnotherColumnGroup" stepKey="moveColumnToSecondGroup">
            <argument name="contentTypeIndex" value="1"/>
            <argument name="containerTargetIndex" value="3"/>
        </actionGroup>
        <waitForPageLoad stepKey="waitForDragOperation" />
        <seeElement selector="{{PageBuilderColumnSection.displayLabel('1', '8/8')}}" stepKey="verifyOriginalColumnGroup"/>
        <seeElement selector="{{PageBuilderColumnSection.displayLabel('2', '1/12')}}" stepKey="verifyMovedColumn"/>
    </test>
    <test name="ValidateGridPanelWontCloseOnArrowClick">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Extensible grid form shouldn't close after clicking number spinners"/>
            <description value="Verify that the grid form stays open after clicking the number spinners in input"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-230"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logOut"/>
        </after>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <actionGroup ref="openGridSizeForm" stepKey="openGridSizeForm" />
        <click selector="{{PageBuilderColumnSection.gridSizeTooltip}}" stepKey="clickWithinPanel"/>
        <seeElement selector="{{PageBuilderColumnSection.gridSizeInput('1')}}" stepKey="verifyPanelStillOpen"/>
    </test>
    <test name="ValidateOddDefaultGridSizeIsSplitCorrectly">
        <annotations>
            <features value="Pagebuilder"/>
            <stories value="Column"/>
            <title value="Verify that the initial two column split is correct when the default grid size is odd."/>
            <description value="Verify that the initial two column split is correct when the default grid size is odd."/>
            <severity value="CRITICAL"/>
            <testCaseId value="MC-2309"/>
            <group value="pagebuilder"/>
            <group value="pagebuilder-column"/>
            <group value="pagebuilder-columnGridSize"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
        </before>
        <after>
            <actionGroup ref="logout" stepKey="logout"/>
        </after>
        <actionGroup ref="navigateToAdminContentManagementPage" stepKey="navigateToAdminContentManagementPage"/>
        <conditionalClick stepKey="expandAdvancedContentTools" selector="{{ContentManagementSection.PageBuilderOptions}}" dependentSelector="{{ContentManagementSection.CheckIfPageBuilderTabExpanded}}" visible="true"/>
        <conditionalClick stepKey="uncheckUseSystemValueDefault" selector="{{ContentManagementSection.UseSystem('column_grid_default')}}" dependentSelector="{{ContentManagementSection.UseSystemChecked('column_grid_default')}}" visible="true"/>
        <comment userInput="Enter Odd Default Grid Size" stepKey="comment1"/>
        <actionGroup ref="updateDefaultGridSizeConfig" stepKey="enterValidDefaultGridSize">
            <argument name="gridSize" value="{{PageBuilderGridSize.gridSize_5}}"/>
        </actionGroup>
        <actionGroup ref="saveStoreConfiguration" stepKey="saveStoreConfiguration"/>
        <see selector="{{ContentManagementSection.StoreConfigurationPageSuccessMessage}}" userInput="You saved the configuration." stepKey="seeSuccessMessage1"/>
        <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
        <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        <actionGroup ref="dragContentTypeToStage" stepKey="dragColumnIntoStage">
            <argument name="contentType" value="PageBuilderColumnContentType"/>
        </actionGroup>
        <seeElement selector="{{PageBuilderColumnSection.displayLabel('1', '3/5')}}" stepKey="verifyFirstColumn"/>
        <seeElement selector="{{PageBuilderColumnSection.displayLabel('2', '2/5')}}" stepKey="verifySecondColumn"/>
    </test>
</tests>
