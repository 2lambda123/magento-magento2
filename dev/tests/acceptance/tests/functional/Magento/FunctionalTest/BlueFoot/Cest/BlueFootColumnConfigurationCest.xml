<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->

<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="../../../../../../vendor/magento/magento2-functional-testing-framework/src/Magento/FunctionalTestingFramework/Test/etc/testSchema.xsd">
    <cest name="BlueFootColumnConfigurationCest">
        <annotations>
            <features value="BlueFoot CMS"/>
            <stories value="Bluefoot Column Configuration"/>
            <group value="bluefoot"/>
            <env value="chrome"/>
            <env value="firefox"/>
            <env value="phantomjs"/>
        </annotations>
        <before>
            <actionGroup ref="navigateToAPageWithBlueFoot" mergeKey="navigateToAPageWithBlueFoot"/>
            <actionGroup ref="switchToBlueFootStage" mergeKey="switchToBlueFootStage"/>
            <actionGroup ref="dragBlueFootColumnIntoStage" mergeKey="dragFirstColumn"/>
            <actionGroup ref="dragBlueFootColumnIntoStage" mergeKey="dragSecondColumn"/>
        </before>
        <test name="SlideOutPanelWithSettingsContainRequiredFields">
            <annotations>
                <title value="Displays requires column settings"/>
                <description value="Slide out panel with required settings appear"/>
                <severity value="CRITICAL"/>
                <testCaseId value="MAGETWO-82227"/>
            </annotations>
            <actionGroup ref="openBlueFootEditColumnPanel" mergeKey="openEditPanel"/>

            <actionGroup ref="validateSlideOutPanelField" mergeKey="seeAppearanceMinHeightProperty">
                <argument name="property" value="BlueFootAppearanceMinHeightProperty"/>
            </actionGroup>
            <actionGroup ref="validateSlideOutPanelField" mergeKey="seeBackgroundColorProperty">
                <argument name="property" value="BlueFootBackgroundColorProperty"/>
            </actionGroup>
            <actionGroup ref="validateSlideOutPanelField" mergeKey="seeBackgroundImageProperty">
                <argument name="property" value="BlueFootBackgroundImageProperty"/>
            </actionGroup>
            <actionGroup ref="validateSlideOutPanelField" mergeKey="seeBackgroundPositionProperty">
                <argument name="property" value="BlueFootBackgroundPositionProperty"/>
            </actionGroup>
            <actionGroup ref="validateSlideOutPanelField" mergeKey="seeBackgroundSizeProperty">
                <argument name="property" value="BlueFootBackgroundSizeProperty"/>
            </actionGroup>
            <actionGroup ref="validateSlideOutPanelField" mergeKey="seeBackgroundRepeatProperty">
                <argument name="property" value="BlueFootBackgroundRepeatProperty"/>
            </actionGroup>
            <actionGroup ref="validateSlideOutPanelField" mergeKey="seeBackgroundAttachmentProperty">
                <argument name="property" value="BlueFootBackgroundAttachmentProperty"/>
            </actionGroup>

            <actionGroup ref="validateSlideOutPanelFieldIsRequired" mergeKey="seeAppearanceMinHeightPropertyIsRequired">
                <argument name="property" value="BlueFootAppearanceMinHeightProperty"/>
            </actionGroup>
            <actionGroup ref="validateSlideOutPanelFieldIsRequired" mergeKey="seeBackgroundPositionPropertyIsRequired">
                <argument name="property" value="BlueFootBackgroundPositionProperty"/>
            </actionGroup>
            <actionGroup ref="validateSlideOutPanelFieldIsRequired" mergeKey="seeBackgroundSizePropertyIsRequired">
                <argument name="property" value="BlueFootBackgroundSizeProperty"/>
            </actionGroup>
            <actionGroup ref="validateSlideOutPanelFieldIsRequired" mergeKey="seeBackgroundRepeatPropertyIsRequired">
                <argument name="property" value="BlueFootBackgroundRepeatProperty"/>
            </actionGroup>
            <actionGroup ref="validateSlideOutPanelFieldIsRequired" mergeKey="seeBackgroundAttachmentPropertyIsRequired">
                <argument name="property" value="BlueFootBackgroundAttachmentProperty"/>
            </actionGroup>
        </test>
        <test name="ColumnSettingsAppearOnFrontend">
            <annotations>
                <title value="Column settings appear on frontend"/>
                <description value="Validate selected column settings appear on the frontend"/>
                <severity value="CRITICAL"/>
                <testCaseId value=""/>
                <group value="bluefoot"/>
            </annotations>
            <fillField selector="{{CmsPageSection.pageTitle}}" userInput="{{BlueFootFirstColumnInStage.pageName}}" mergeKey="enterPageTitle"/>
            <actionGroup ref="openBlueFootEditColumnPanel" mergeKey="openEditPanel"/>
            <fillField selector="{{BlueFootColumnSection.minHeightControl}}" userInput="100" mergeKey="enterMinHeight"/>
            <fillField selector="{{BlueFootColumnSection.backgroundColorControl}}" userInput="#cccccc" mergeKey="enterBackgroundColor"/>
            <selectOption selector="{{BlueFootColumnSection.backgroundPositionControl}}" userInput="Centered" mergeKey="enterBackgroundPosition"/>
            <selectOption selector="{{BlueFootColumnSection.backgroundSizeControl}}" userInput="Cover" mergeKey="enterBackgroundSize"/>
            <click selector="{{BlueFootColumnSection.backgroundRepeatSwitch}}" mergeKey="clickBackgroundRepeat"/>
            <selectOption selector="{{BlueFootColumnSection.backgroundAttachmentControl}}" userInput="Scroll" mergeKey="enterBackgroundAttachment"/>
            <click selector="{{BlueFootColumnSection.columnSaveButton}}" mergeKey="clickSaveColumn"/>
            <wait time="1" mergeKey="wait1"/>
            <click selector="{{CmsPageSection.cmsPageSaveButton}}" mergeKey="clickSaveCmsPage"/>
            <wait time="1" mergeKey="wait2"/>
            <amOnPage url="{{BlueFootFirstColumnInStage.pageName}}" mergeKey="amOnBlueFootPage"/>
            <seeElement selector="{{TwoColumnsOnFrontend.column1Height}}" mergeKey="seeColumn1HeightApplied"/>
            <seeElement selector="{{TwoColumnsOnFrontend.column1BackgroundColor}}" mergeKey="seeColumn1BackgroundColorApplied"/>
            <seeElement selector="{{TwoColumnsOnFrontend.column1BackgroundSize}}" mergeKey="seeColumn1BackgroundSizeApplied"/>
            <seeElement selector="{{TwoColumnsOnFrontend.column1BackgroundRepeat}}" mergeKey="seeColumn1BackgroundRepeatApplied"/>
            <seeElement selector="{{TwoColumnsOnFrontend.column1BackgroundAttachment}}" mergeKey="seeColumn1BackgroundAttachmentApplied"/>
            <seeElement selector="{{TwoColumnsOnFrontend.column2BackgroundSize}}" mergeKey="seeColumn2BackgroundSizeApplied"/>
            <seeElement selector="{{TwoColumnsOnFrontend.column2BackgroundRepeat}}" mergeKey="seeColumn2BackgroundREpeatApplied"/>
            <seeElement selector="{{TwoColumnsOnFrontend.column2BackgroundAttachment}}" mergeKey="seeColumn2BackgroundAttachmentApplied"/>
            <amOnPage url="{{AdminLoginPage}}" mergeKey="navigateToAdmin"/>
            <waitForPageLoad mergeKey="waitForAdminLoginPageLoad"/>
        </test>
        <test name="ColumnChangesPreserved">
            <annotations>
                <title value="Column settings appear on the column form after page save"/>
                <description value="Validate selected column settings appear on the form after page save"/>
                <severity value="CRITICAL"/>
                <testCaseId value=""/>
                <group value="bluefoot"/>
            </annotations>
            <fillField selector="{{CmsPageSection.pageTitle}}" userInput="{{BlueFootFirstColumnInStage.pageName}}" mergeKey="enterPageTitle"/>
            <actionGroup ref="openBlueFootEditColumnPanel" mergeKey="openEditPanel1"/>
            <fillField selector="{{BlueFootColumnSection.minHeightControl}}" userInput="100" mergeKey="enterMinHeight"/>
            <fillField selector="{{BlueFootColumnSection.backgroundColorControl}}" userInput="#cccccc" mergeKey="enterBackgroundColor"/>
            <selectOption selector="{{BlueFootColumnSection.backgroundPositionControl}}" userInput="Centered" mergeKey="enterBackgroundPosition"/>
            <selectOption selector="{{BlueFootColumnSection.backgroundSizeControl}}" userInput="Cover" mergeKey="enterBackgroundSize"/>
            <click selector="{{BlueFootColumnSection.backgroundRepeatSwitch}}" mergeKey="clickBackgroundRepeat"/>
            <selectOption selector="{{BlueFootColumnSection.backgroundAttachmentControl}}" userInput="Scroll" mergeKey="enterBackgroundAttachment"/>
            <click selector="{{BlueFootColumnSection.columnSaveButton}}" mergeKey="clickSaveColumn"/>
            <wait time="1" mergeKey="wait1"/>
            <click selector="{{CmsPageSection.cmsPageSaveButton}}" mergeKey="clickSaveCmsPage"/>
            <wait time="1" mergeKey="wait2"/>
            <waitForPageLoad mergeKey="waitForCmsPagesGridLoad"/>
            <fillField selector="{{CmsPageGrid.cmsPageSearchInput}}" userInput='"{{BlueFootFirstColumnInStage.pageName}}"' mergeKey="enterPageNameInSearch"/>
            <click selector="{{CmsPageGrid.searchButton}}" mergeKey="clickSearchButton"/>
            <wait time="3" mergeKey="wait3"/>
            <click selector="{{CmsPageGrid.firstItemSelectButton}}" mergeKey="clickSelectButtonOnFirstItem"/>
            <click selector="{{CmsPageGrid.firstItemEditButton}}" mergeKey="clickSelectEditOnFirstItem"/>
            <wait time="3" mergeKey="wait4"/>
            <click selector="{{CmsNewPagePageContentSection.header}}" mergeKey="clickExpandContent"/>
            <wait time="1" mergeKey="wait5"/>
            <actionGroup ref="openBlueFootEditColumnPanel" mergeKey="openEditPanel2"/>
            <wait time="3" mergeKey="wait6"/>
            <seeInField selector="{{BlueFootColumnSection.minHeightControl}}" userInput="100" mergeKey="seeMinHeight"/>
            <seeInField selector="{{BlueFootColumnSection.backgroundColorControl}}" userInput="#cccccc" mergeKey="seeBackgroundColor"/>
            <seeOptionIsSelected selector="{{BlueFootColumnSection.backgroundPositionControl}}" userInput="Centered" mergeKey="seeBackgroundPosition"/>
            <seeOptionIsSelected selector="{{BlueFootColumnSection.backgroundSizeControl}}" userInput="Cover" mergeKey="seeBackgroundSize"/>
            <seeCheckboxIsChecked selector="{{BlueFootColumnSection.backgroundRepeatControl}}" mergeKey="seeBackgroundRepeat"/>
            <seeOptionIsSelected selector="{{BlueFootColumnSection.backgroundAttachmentControl}}" userInput="Scroll" mergeKey="seeBackgroundAttachment"/>
        </test>
    </cest>
</config>
