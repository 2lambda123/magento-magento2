<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->

<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="../../../../../../vendor/magento/magento2-functional-testing-framework/src/Magento/FunctionalTestingFramework/Test/etc/testSchema.xsd">
    <cest name="ColumnAppearanceCest">
        <annotations>
            <features value="BlueFoot CMS"/>
            <stories value="Bluefoot Column Configuration"/>
            <group value="bluefoot"/>
            <env value="chrome"/>
            <env value="firefox"/>
            <env value="phantomjs"/>
        </annotations>
        <before>
            <actionGroup ref="navigateToAPageWithBlueFoot" mergeKey="navigateToAPageWithBlueFoot"/>
            <actionGroup ref="switchToBlueFootStage" mergeKey="switchToBlueFootStage"/>
            <actionGroup ref="dragBlueFootColumnIntoStage" mergeKey="dragFirstColumn"/>
            <actionGroup ref="dragBlueFootColumnIntoStage" mergeKey="dragSecondColumn"/>
        </before>
        <test name="ColumnAppearanceSettingsAppearOnFrontend">
            <annotations>
                <title value="Column appearance settings appear on frontend"/>
                <description value="Validate selected column settings appear on the frontend"/>
                <severity value="CRITICAL"/>
                <group value="bluefoot"/>
            </annotations>
            <fillField selector="{{CmsPageSection.pageTitle}}" userInput="{{BlueFootFirstColumnInStage.pageName}}" mergeKey="enterPageTitle"/>
            <actionGroup ref="openBlueFootEditColumnPanel" mergeKey="openEditPanel"/>
            <actionGroup ref="fillSlideOutPanelField" mergeKey="enterMinHeightProperty">
                <argument name="property" value="BlueFootAppearanceMinHeightProperty"/>
            </actionGroup>
            <actionGroup ref="selectSlideOutPanelField" mergeKey="enterBackgroundWidthProperty">
                <argument name="property" value="BlueFootBackgroundWidthProperty"/>
            </actionGroup>
            <actionGroup ref="selectSlideOutPanelField" mergeKey="enterBackgroundAppearanceProperty">
                <argument name="property" value="BlueFootBackgroundAppearanceProperty"/>
            </actionGroup>
            <click selector="{{BlueFootColumnSection.columnSaveButton}}" mergeKey="clickSaveColumn"/>
            <wait time="1" mergeKey="wait1"/>
            <click selector="{{CmsPageSection.cmsPageSaveButton}}" mergeKey="clickSaveCmsPage"/>
            <wait time="1" mergeKey="wait2"/>
            <amOnPage url="{{BlueFootFirstColumnInStage.pageName}}" mergeKey="amOnBlueFootPage"/>
            <seeElement selector="{{RowsOnFrontend.row1Display}}" mergeKey="seeRow1DisplayApplied"/>
            <seeElement selector="{{ColumnsOnFrontend.column1Height}}" mergeKey="seeColumn1MinHeightApplied"/>
            <seeElement selector="{{ColumnsOnFrontend.column1BackgroundWidth}}" mergeKey="seeColumn1WidthApplied"/>
            <seeElement selector="//*[@data-role='column' and @data-appearance='align-bottom'][1][contains(@style, 'align-self: flex-end;')]" mergeKey="seeColumn1AppearanceApplied1"/>
            <seeElementInDOM selector="{{ColumnsOnFrontend.column2BackgroundWidth}}" mergeKey="seeColumn2WidthApplied"/>
            <seeElementInDOM selector="//*[@data-role='column' and @data-appearance='align-top'][1][contains(@style, 'align-self: flex-start;')]" mergeKey="seeColumn2AppearanceApplied1"/>
            <amOnPage url="{{AdminLoginPage}}" mergeKey="navigateToAdmin"/>
            <waitForPageLoad mergeKey="waitForAdminLoginPageLoad"/>
        </test>
    </cest>
</config>
