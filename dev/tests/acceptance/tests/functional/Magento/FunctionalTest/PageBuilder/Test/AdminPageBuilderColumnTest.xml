<?xml version="1.0" encoding="UTF-8"?>
<!--
 /**
  * Copyright Â© Magento, Inc. All rights reserved.
  * See COPYING.txt for license details.
  */
-->

<tests xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="../../../../../../vendor/magento/magento2-functional-testing-framework/src/Magento/FunctionalTestingFramework/Test/etc/testSchema.xsd">
    <test name="AddColumnContentBlockToCMSPage">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Column Configuration MAGETWO-66176"/>
            <title value="Add a column into a row"/>
            <description value="A user should be able to add a column into a row."/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-82860"/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragColumnIntoStage">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <seeNumberOfElements selector="{{PageBuilderColumnSection.columnGroupColumns}}" userInput="2" stepKey="seeElementColumn"/>
    </test>
    <test name="RemoveColumnFromStage">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Column Configuration MAGETWO-66176"/>
            <title value="Remove a column from a row"/>
            <description value="A user should be able to remove columns from rows."/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-82861"/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragColumnIntoStage">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <seeNumberOfElements selector="{{PageBuilderColumnSection.columnGroupColumns}}" userInput="2" stepKey="seeElementColumn"/>
        <actionGroup ref="removeContentBlockFromStage" stepKey="removeColumn1">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMask"/>
        <seeNumberOfElements selector="{{PageBuilderColumnSection.columnGroupColumns}}" userInput="1" stepKey="seeOneColumnInGroup" />
        <actionGroup ref="removeContentBlockFromStage" stepKey="removeColumn2">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMask"/>
        <dontSeeElement selector="{{PageBuilderColumnSection.column}}" stepKey="dontSeeColumn"/>
        <dontSeeElement selector="{{PageBuilderColumnSection.columnGroup}}" stepKey="dontSeeColumn"/>
    </test>
    <test name="SlideOutPanelWithSettingsContainRequiredFields">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Column Configuration MAGETWO-66176"/>
            <title value="Displays requires column settings"/>
            <description value="Slide out panel with required settings appear"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-82227"/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragColumnIntoStage">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <seeNumberOfElements selector="{{PageBuilderColumnSection.columnGroupColumns}}" userInput="2" stepKey="seeElementColumn"/>
        <actionGroup ref="openPageBuilderEditColumnPanel" stepKey="openEditPanel"/>
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeAppearanceMinHeightProperty">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeBackgroundColorProperty">
            <argument name="property" value="PageBuilderBackgroundColorProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeBackgroundImageProperty">
            <argument name="property" value="PageBuilderBackgroundImageProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeBackgroundPositionProperty">
            <argument name="property" value="PageBuilderBackgroundPositionProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeBackgroundSizeProperty">
            <argument name="property" value="PageBuilderBackgroundSizeProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeBackgroundRepeatProperty">
            <argument name="property" value="PageBuilderBackgroundRepeatProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeBackgroundAttachmentProperty">
            <argument name="property" value="PageBuilderBackgroundAttachmentProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelFieldIsRequired" stepKey="seeBackgroundPositionPropertyIsRequired">
            <argument name="property" value="PageBuilderBackgroundPositionProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelFieldIsRequired" stepKey="seeBackgroundSizePropertyIsRequired">
            <argument name="property" value="PageBuilderBackgroundSizeProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelFieldIsRequired" stepKey="seeBackgroundRepeatPropertyIsRequired">
            <argument name="property" value="PageBuilderBackgroundRepeatProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelFieldIsRequired" stepKey="seeBackgroundAttachmentPropertyIsRequired">
            <argument name="property" value="PageBuilderBackgroundAttachmentProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelFieldIsRequired" stepKey="seeBackgroundAttachmentPropertyIsRequired">
            <argument name="property" value="PageBuilderBackgroundAttachmentProperty"/>
        </actionGroup>
    </test>
    <test name="ColumnCanInteractEditPanel">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Column Configuration MAGETWO-66176"/>
            <title value="Can close the edit panel"/>
            <description value="A user should be able to open the edit form on an added column."/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-82862"/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragColumnIntoStage">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <seeNumberOfElements selector="{{PageBuilderColumnSection.columnGroupColumns}}" userInput="2" stepKey="seeElementColumn"/>
        <actionGroup ref="openPageBuilderEditColumnPanel" stepKey="openEditPanel"/>
        <seeElement selector="{{PageBuilderActionsSection.editForm}}" stepKey="seeEditForm"/>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMask"/>
        <waitForElementNotVisible time="2" selector="{{PageBuilderColumnSection.editFormSpinner}}" stepKey="waitForSpinner" />
        <waitForElementVisible time="2" selector="{{PageBuilderActionsSection.editFormCancel}}" stepKey="waitForEditFormCancel"/>
        <click selector="{{PageBuilderActionsSection.editFormCancel}}" stepKey="clickEditFormCancel"/>
        <waitForElementNotVisible time="2" selector="{{PageBuilderActionsSection.editForm}}" stepKey="waitClose" />
        <dontSeeElement selector="{{PageBuilderActionsSection.editForm}}" stepKey="dontSeeEditForm"/>
    </test>
    <test name="ColumnSettingsAppearInAdmin">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Column Admin Preview MAGETWO-72429"/>
            <title value="Configuration settings apply in admin"/>
            <description value="A user should be able to preview column configuration settings."/>
            <severity value="CRITICAL"/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragColumnIntoStage">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <actionGroup ref="openPageBuilderEditColumnPanel" stepKey="openEditPanel"/>
        <wait time="1" stepKey="wait3"/>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterAppearanceAlignmentProperty">
            <argument name="property" value="PageBuilderBackgroundAppearanceProperty"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterBackgroundColorProperty">
            <argument name="property" value="PageBuilderBackgroundColorProperty"/>
        </actionGroup>
        <actionGroup ref="attachFileSlideOutProperty" stepKey="attachPageBuilderFile">
            <argument name="property" value="PageBuilderBackgroundImageProperty"/>
        </actionGroup>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundPositionProperty">
            <argument name="property" value="PageBuilderBackgroundPositionProperty"/>
        </actionGroup>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundSizePropertyContain">
            <argument name="property" value="PageBuilderBackgroundSizePropertyContain"/>
        </actionGroup>
        <click selector="{{PageBuilderColumnSection.backgroundRepeatSwitch}}" stepKey="clickBackgroundProperty"/>
        <wait time="1" stepKey="waitForClick10"/>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundAttachmentProperty">
            <argument name="property" value="PageBuilderBackgroundAttachmentProperty"/>
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMask"/>
        <waitForElementVisible time="3" selector="{{AdvancedForm.advancedSectionName}}" stepKey="waitForAdvancedForm"/>
        <seeElement selector="{{AdvancedForm.advancedSectionName}}" stepKey="seeAdvancedFormSection"/>
        <click selector="{{AdvancedForm.advancedSectionName}}" stepKey="clickAdvancedFormSection"/>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterAdvancedAlignmentProperty">
            <argument name="property" value="PageBuilderAdvancedAlignmentProperty"/>
        </actionGroup>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterAdvancedBorderProperty">
            <argument name="property" value="PageBuilderAdvancedBorderPropertyDotted"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterAdvancedBorderColorProperty">
            <argument name="property" value="PageBuilderAdvancedBorderColorProperty_ffffff"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterAdvancedBorderWidthProperty">
            <argument name="property" value="PageBuilderAdvancedBorderWidthProperty10"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterAdvancedBorderRadiusProperty">
            <argument name="property" value="PageBuilderAdvancedBorderRadiusProperty12"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelFieldMarginsAndPadding" stepKey="enterAdvancedMarginsAndPaddingProperty">
            <argument name="property" value="PageBuilderAdvancedMarginsAndPaddingProperty"/>
        </actionGroup>
        <wait time="1" stepKey="wait6"/>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.alignmentBottom)}}" stepKey="seeFirstColumnAlignmentBottom"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.minHeight)}}" stepKey="seeFirstColumnMinHeight"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.bgColor)}}" stepKey="seeFirstColumnBgColor"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.bgImage)}}" stepKey="seeFirstColumnBgImage"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.bgPosition)}}" stepKey="seeFirstColumnBgPosition"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.bgSize)}}" stepKey="seeFirstColumnBgSize"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.bgRepeat)}}" stepKey="seeFirstColumnBgRepeat"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.bgAttachment)}}" stepKey="seeFirstColumnBgAttachment"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.textAlignment)}}" stepKey="seeFirstColumnTextAlignment"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.margin)}}" stepKey="seeFirstColumnMargin"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.padding)}}" stepKey="seeFirstColumnPadding"/>
    </test>
    <test name="ColumnSettingsAppearOnFrontend">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Column Configuration MAGETWO-66176"/>
            <title value="Column settings appear on frontend"/>
            <description value="Validate selected column settings appear on the frontend"/>
            <severity value="CRITICAL"/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <fillField selector="{{CmsPageSection.pageTitle}}" userInput="{{PageBuilderFirstColumnInStage.pageName}}" stepKey="enterPageTitle"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragColumnIntoStage">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <actionGroup ref="openPageBuilderEditColumnPanel" stepKey="openEditPanel"/>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty1">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterBackgroundColorProperty">
            <argument name="property" value="PageBuilderBackgroundColorProperty"/>
        </actionGroup>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundPositionProperty">
            <argument name="property" value="PageBuilderBackgroundPositionProperty"/>
        </actionGroup>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundSizePropertyContain">
            <argument name="property" value="PageBuilderBackgroundSizePropertyContain"/>
        </actionGroup>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundAppearancePropertyBottom">
            <argument name="property" value="PageBuilderBackgroundAppearanceProperty"/>
        </actionGroup>
        <click selector="{{PageBuilderColumnSection.backgroundRepeatSwitch}}" stepKey="clickBackgroundProperty"/>
        <wait time="1" stepKey="waitForClick10"/>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundAttachmentProperty">
            <argument name="property" value="PageBuilderBackgroundAttachmentProperty"/>
        </actionGroup>
        <wait time="1" stepKey="wait5"/>
        <actionGroup ref="attachFileSlideOutProperty" stepKey="attachPageBuilderFile">
            <argument name="property" value="PageBuilderBackgroundImageProperty"/>
        </actionGroup>
        <wait time="1" stepKey="wait6"/>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <actionGroup ref="openPageBuilderEditColumnPanel2" stepKey="openEditPanel2"/>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty2">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <wait time="1" stepKey="wait7"/>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings2"/>
        <actionGroup ref="saveCmsPage" stepKey="saveCmsPage"/>
        <amOnPage url="{{PageBuilderFirstColumnInStage.pageName}}" stepKey="amOnPageBuilderPage"/>
        <seeElement selector="{{ColumnsOnFrontend.column1Height}}" stepKey="seeColumn1MinHeightApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column1BackgroundColor}}" stepKey="seeColumn1BackgroundColorApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column1BackgroundSize}}" stepKey="seeColumn1BackgroundSizeApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column1BackgroundRepeatApplied}}" stepKey="seeColumn1BackgroundRepeatApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column1BackgroundAttachment}}" stepKey="seeColumn1BackgroundAttachmentFixedApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column1BackgroundImage}}" stepKey="seeColumn1BackgroundImageApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column1BackgroundWidth}}" stepKey="seeColumn1WidthApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column1Appearance}}"  stepKey="seeColumn1AppearanceBottomApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2BackgroundWidth}}" stepKey="seeColumn2DefaultWidthApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2Height}}" stepKey="seeColumn2HeightApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2BackgroundSize}}" stepKey="seeColumn2BackgroundSizeAutoApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2BackgroundRepeatNotApplied}}" stepKey="seeColumn2BackgroundRepeatNotApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2BackgroundAttachment}}" stepKey="seeColumn2BackgroundAttachmentScrollApplied"/>
    </test>
    <test name="ColumnAppearanceSettingsShowOnFrontend">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Column Configuration MAGETWO-66176"/>
            <title value="Column appearance settings show on frontend"/>
            <description value="Validate column appearance settings appear on the frontend"/>
            <severity value="CRITICAL"/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragFirstTwoColumns">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="containerBlockType" value="PageBuilderRowContentBlock"/>
            <argument name="containerTarget" value="PageBuilderFirstRowInStage"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragThirdColumn">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="containerBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="containerTarget" value="PageBuilderFirstColumnInStage" />
        </actionGroup>
        <fillField selector="{{CmsPageSection.pageTitle}}" userInput="{{PageBuilderFirstColumnInStage.pageName}}" stepKey="enterPageTitle"/>
        <actionGroup ref="openPageBuilderEditColumnPanel" stepKey="openEditPanel"/>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundAppearancePropertyBottom">
            <argument name="property" value="PageBuilderBackgroundAppearanceProperty"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <actionGroup ref="openPageBuilderEditColumnPanel2" stepKey="openEditPanel2"/>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundAppearancePropertyCentered">
            <argument name="property" value="PageBuilderBackgroundAppearancePropertyCentered"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty2">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <wait time="1" stepKey="wait1"/>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings2"/>
        <actionGroup ref="openPageBuilderEditColumnPanel3" stepKey="openEditPanel3"/>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty3">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings3"/>
        <actionGroup ref="saveCmsPage" stepKey="saveCmsPage"/>
        <amOnPage url="{{PageBuilderFirstColumnInStage.pageName}}" stepKey="amOnPageBuilderPage"/>
        <seeElement selector="{{ColumnsOnFrontend.column1Height}}" stepKey="seeColumn1MinHeightApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.alignmentBottom)}}" stepKey="seeColumn1AlignmentApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.minHeight)}}" stepKey="seeColumn1HeightApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.columnStyle(PageBuilderSecondColumnInStage.index, PageBuilderColumnStyles.alignmentCenter)}}" stepKey="seeColumn2AlignmentApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.columnStyle(PageBuilderSecondColumnInStage.index, PageBuilderColumnStyles.minHeight)}}" stepKey="seeColumn2MinHeightApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.columnStyle(PageBuilderThirdColumnInStage.index, PageBuilderColumnStyles.alignmentFull)}}" stepKey="seeColumn3AppearanceApplied"/>
    </test>
    <test name="ColumnChangesPreserved">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Column Configuration MAGETWO-66176"/>
            <title value="Column settings appear on the column form after page save"/>
            <description value="Validate selected column settings appear on the form after page save"/>
            <severity value="CRITICAL"/>
            <testCaseId value=""/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <fillField selector="{{CmsPageSection.pageTitle}}" userInput="{{PageBuilderFirstColumnInStage.pageName}}" stepKey="enterPageTitle"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragColumnIntoStage">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <actionGroup ref="openPageBuilderEditColumnPanel" stepKey="openEditPanel1"/>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterBackgroundColorProperty">
            <argument name="property" value="PageBuilderBackgroundColorProperty_087E8B"/>
        </actionGroup>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundPositionProperty">
            <argument name="property" value="PageBuilderBackgroundPositionProperty"/>
        </actionGroup>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundSizePropertyCover">
            <argument name="property" value="PageBuilderBackgroundSizeProperty"/>
        </actionGroup>
        <wait time="1" stepKey="wait3"/>
        <actionGroup ref="attachFileSlideOutProperty" stepKey="attachPageBuilderFile">
            <argument name="property" value="PageBuilderBackgroundImageProperty"/>
        </actionGroup>
        <click selector="{{PageBuilderColumnSection.backgroundRepeatSwitch}}" stepKey="clickBackgroundProperty"/>
        <wait time="1" stepKey="waitForClick{{property.fieldName}}"/>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundAttachmentProperty">
            <argument name="property" value="PageBuilderBackgroundAttachmentProperty"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <actionGroup ref="saveCmsPage" stepKey="saveCmsPage2"/>
        <waitForPageLoad stepKey="waitForCmsPagesGridLoad"/>
        <waitForElementVisible time="5" selector="{{CmsPageGrid.cmsPageSearchInput}}" stepKey="waitForSearchField" />
        <waitForElementVisible time="5" selector="{{CmsPageGrid.searchButton}}" stepKey="waitForButton" />
        <waitForElementNotVisible selector="{{CmsPageGrid.spinner}}" stepKey="waitForSpinnerNotVisible1" />
        <conditionalClick selector="{{CmsPageGrid.clearAllButton}}" dependentSelector="{{CmsPageGrid.activeFilter}}" stepKey="clickClearFilterIfPresent" visible="true"/>
        <waitForElementNotVisible selector="{{CmsPageGrid.spinner}}" stepKey="waitForSpinnerNotVisible2" />
        <fillField selector="{{CmsPageGrid.cmsPageSearchInput}}" userInput='"{{PageBuilderFirstColumnInStage.pageName}}"' stepKey="enterPageNameInSearch"/>
        <waitForElementNotVisible selector="{{CmsPageGrid.spinner}}" stepKey="waitForSpinnerNotVisible3" />
        <click selector="{{CmsPageGrid.searchButton}}" stepKey="clickSearchButton"/>
        <waitForElement time="10" selector="{{CmsPageGrid.firstItemSelectButton}}" stepKey="waitForFirstItemButton" />
        <waitForPageLoad stepKey="waitForSpinner" />
        <waitForElementVisible time="10" selector="{{CmsPageGrid.firstItemSelectButton}}" stepKey="waitForFirstItemButton" />
        <waitForElementNotVisible selector="{{CmsPageGrid.spinner}}" stepKey="waitForSpinnerNotVisible4" />
        <click selector="{{CmsPageGrid.firstItemSelectButton}}" stepKey="clickSelectButtonOnFirstItem"/>
        <waitForPageLoad stepKey="waitForSpinner2" />
        <waitForElementVisible time="10" selector="{{CmsPageGrid.firstItemEditButton}}" stepKey="waitForFirstItemEditButton" />
        <waitForElementNotVisible selector="{{CmsPageGrid.spinner}}" stepKey="waitForSpinnerNotVisible5" />
        <click selector="{{CmsPageGrid.firstItemEditButton}}" stepKey="clickSelectEditOnFirstItem"/>
        <waitForElementVisible time="5" selector="{{CmsNewPagePageContentSection.header}}" stepKey="waitForContentHeader" />
        <waitForElementNotVisible time="10" selector="{{CmsPageSection.spinner}}" stepKey="waitForCmsPageSpinner" />
        <click selector="{{CmsNewPagePageContentSection.header}}" stepKey="clickExpandContent"/>
        <waitForElementVisible time="10" selector="{{PageBuilderRowSection.row}}" stepKey="waitForPageBuilderRow" />
        <actionGroup ref="openPageBuilderEditColumnPanel" stepKey="openEditPanel2"/>
        <actionGroup ref="seeInFieldSlideOutProperty" stepKey="PageBuilderAppearanceMinHeightProperty">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <actionGroup ref="seeInFieldSlideOutProperty" stepKey="seeBackgroundColorProperty">
            <argument name="property" value="PageBuilderBackgroundColorProperty_087E8B"/>
        </actionGroup>
        <seeElementInDOM selector="{{PageBuilderColumnSection.backgroundImagePreview}}" stepKey="backgroundImagePreview"/>
        <actionGroup ref="seeOptionIsSelectedSlideOutProperty" stepKey="seeBackgroundPositionProperty">
            <argument name="property" value="PageBuilderBackgroundPositionProperty"/>
        </actionGroup>
        <actionGroup ref="seeOptionIsSelectedSlideOutProperty" stepKey="seeBackgroundSizeProperty">
            <argument name="property" value="PageBuilderBackgroundSizeProperty"/>
        </actionGroup>
        <actionGroup ref="seeOptionIsCheckedSlideOutProperty" stepKey="seeBackgroundRepeatProperty">
            <argument name="property" value="PageBuilderBackgroundRepeatProperty"/>
        </actionGroup>
        <actionGroup ref="seeOptionIsSelectedSlideOutProperty" stepKey="seeBackgroundAttachmentProperty">
            <argument name="property" value="PageBuilderBackgroundAttachmentProperty"/>
        </actionGroup>
    </test>
    <test name="PreviewBackgroundImage">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Column Configuration MAGETWO-66176"/>
            <title value="Upload and preview an image for column background style"/>
            <description value="Upload an image file to edit column form and see a preview in the admin panel"/>
            <severity value="CRITICAL"/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragColumnIntoStage">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <actionGroup ref="openPageBuilderEditColumnPanel" stepKey="openEditPanel"/>
        <wait time="1" stepKey="wait3"/>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <actionGroup ref="attachFileSlideOutProperty" stepKey="attachPageBuilderFile">
            <argument name="property" value="PageBuilderBackgroundImageProperty"/>
        </actionGroup>
        <seeElementInDOM selector="{{PageBuilderColumnSection.backgroundImagePreview}}" stepKey="backgroundImagePreview"/>
    </test>
    <test name="ValidateBackgroundImageUrl">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Column Configuration MAGETWO-66176"/>
            <title value="Background Image Url is displayed on front end"/>
            <description value="Validate background image appears on the frontend"/>
            <severity value="CRITICAL"/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <fillField selector="{{CmsPageSection.pageTitle}}" userInput="{{PageBuilderFirstColumnInStage.pageName}}" stepKey="enterPageTitle"/>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragColumnIntoStage">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <actionGroup ref="openPageBuilderEditColumnPanel" stepKey="openEditPanel"/>
        <wait time="1" stepKey="wait1"/>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <actionGroup ref="attachFileSlideOutProperty" stepKey="attachPageBuilderFile">
            <argument name="property" value="PageBuilderBackgroundImageProperty"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings"/>
        <wait time="1" stepKey="waitForDataStoreUpdate"/>
        <waitForElementVisible time="2" selector="{{CmsPageSection.cmsPageSaveButton}}" stepKey="waitForSavePage" />
        <click selector="{{CmsPageSection.cmsPageSaveButton}}" stepKey="clickSaveCmsPage"/>
        <wait time="1" stepKey="wait3"/>
        <amOnPage url="{{PageBuilderFirstColumnInStage.pageName}}" stepKey="amOnPageBuilderPage"/>
        <wait time="5" stepKey="wait5"/>
        <seeElementInDOM selector="{{ColumnsOnFrontend.backgroundImageSource(PageBuilderBackgroundImageProperty.path,PageBuilderBackgroundImageProperty.fileType)}}" stepKey="seeBackgroundImageInDom"/>
        <dontSeeInPageSource userInput=".png%22" stepKey="dontSeeEscapedQuoteInPageSource"/>
    </test>
    <test name="ColumnBackgroundColorPreserved">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Column Configuration MAGETWO-66176"/>
            <title value="Column background color is preserved on edit"/>
            <description value="Validate column background color is preserved on edit"/>
            <severity value="CRITICAL"/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragFirstColumn">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="containerBlockType" value="PageBuilderRowContentBlock"/>
            <argument name="containerTarget" value="PageBuilderFirstRowInStage"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragRowIntoStage">
            <argument name="contentBlockType" value="PageBuilderRowContentBlock"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragSecondColumn">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="containerBlockType" value="PageBuilderRowContentBlock"/>
            <argument name="containerTarget" value="PageBuilderSecondRowInStage" />
        </actionGroup>
        <fillField selector="{{CmsPageSection.pageTitle}}" userInput="{{PageBuilderFirstColumnInStage.pageName}}" stepKey="enterPageTitle"/>
        <actionGroup ref="openPageBuilderEditColumnPanel" stepKey="openEditPanel"/>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundAppearanceProperty1">
            <argument name="property" value="PageBuilderBackgroundAppearanceProperty"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty1">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterBackgroundColorProperty1">
            <argument name="property" value="PageBuilderBackgroundColorProperty_087E8B"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings1"/>
        <actionGroup ref="openPageBuilderEditColumnPanel2" stepKey="openEditPanel2"/>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterBackgroundAppearanceProperty2">
            <argument name="property" value="PageBuilderBackgroundAppearancePropertyCentered"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty2">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty_300"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterBackgroundColorProperty2">
            <argument name="property" value="PageBuilderBackgroundColorProperty_FF5A5F"/>
        </actionGroup>
        <wait time="1" stepKey="wait1"/>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings2"/>
        <actionGroup ref="openPageBuilderEditColumnPanel3" stepKey="openEditPanel3"/>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterMinHeightProperty3">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty_200"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterBackgroundColorProperty3">
            <argument name="property" value="PageBuilderBackgroundColorProperty_3C3C3C"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettings3"/>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <see userInput="{{PageBuilderFirstColumnInStage.pageName}}" selector="{{CmsPageSection.cmsPageTitle}}" stepKey="assertTitleSavedCmsPage"/>
        <amOnPage url="{{PageBuilderFirstColumnInStage.pageName}}" stepKey="amOnPageBuilderPage"/>
        <seeElement selector="{{ColumnsOnFrontend.column1Height}}" stepKey="seeColumn1MinHeightApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column1Appearance}}"  stepKey="seeColumn1AppearanceApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column1BackgroundColorPeacock}}"  stepKey="seeColumn1BackgroundColorApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2Height300}}" stepKey="seeColumn2MinHeightApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2Appearance}}"  stepKey="seeColumn2AppearanceApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2BackgroundColorSalmon}}"  stepKey="seeColumn2BackgroundColorApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column3Height200}}" stepKey="seeColumn3MinHeightApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column3Appearance}}"  stepKey="seeColumn3AppearanceApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column3BackgroundColorGrey}}"  stepKey="seeColumn3BackgroundColorApplied"/>
        <amOnPage url="/admin/cms/page" stepKey="goToPagesList"/>
        <waitForElementVisible time="5" selector="{{CmsPageGrid.cmsPageSearchInput}}" stepKey="waitForSearchField" />
        <waitForElementVisible time="5" selector="{{CmsPageGrid.searchButton}}" stepKey="waitForButton" />
        <waitForElementNotVisible selector="{{CmsPageGrid.spinner}}" stepKey="waitForSpinnerNotVisible1" />
        <conditionalClick selector="{{CmsPageGrid.clearAllButton}}" dependentSelector="{{CmsPageGrid.activeFilter}}" stepKey="clickClearFilterIfPresent" visible="true"/>
        <waitForElementNotVisible selector="{{CmsPageGrid.spinner}}" stepKey="waitForSpinnerNotVisible2" />
        <fillField selector="{{CmsPageGrid.cmsPageSearchInput}}" userInput='"{{PageBuilderFirstColumnInStage.pageName}}"' stepKey="enterPageNameInSearch"/>
        <waitForElementNotVisible selector="{{CmsPageGrid.spinner}}" stepKey="waitForSpinnerNotVisible3" />
        <click selector="{{CmsPageGrid.searchButton}}" stepKey="clickSearchButton"/>
        <waitForElement time="10" selector="{{CmsPageGrid.firstItemSelectButton}}" stepKey="waitForFirstItemButton" />
        <waitForPageLoad stepKey="waitForSpinner" />
        <waitForElementVisible time="10" selector="{{CmsPageGrid.firstItemSelectButton}}" stepKey="waitForFirstItemButton" />
        <waitForElementNotVisible selector="{{CmsPageGrid.spinner}}" stepKey="waitForSpinnerNotVisible4" />
        <click selector="{{CmsPageGrid.firstItemSelectButton}}" stepKey="clickSelectButtonOnFirstItem"/>
        <waitForPageLoad stepKey="waitForSpinner2" />
        <waitForElementVisible time="10" selector="{{CmsPageGrid.firstItemEditButton}}" stepKey="waitForFirstItemEditButton" />
        <waitForElementNotVisible selector="{{CmsPageGrid.spinner}}" stepKey="waitForSpinnerNotVisible5" />
        <click selector="{{CmsPageGrid.firstItemEditButton}}" stepKey="clickSelectEditOnFirstItem"/>
        <waitForElementVisible time="5" selector="{{CmsNewPagePageContentSection.header}}" stepKey="waitForContentHeader" />
        <waitForElementNotVisible time="10" selector="{{CmsPageSection.spinner}}" stepKey="waitForCmsPageSpinner" />
        <click selector="{{CmsNewPagePageContentSection.header}}" stepKey="clickExpandContent"/>
        <waitForElementVisible time="10" selector="{{PageBuilderRowSection.row}}" stepKey="waitForPageBuilderRow" />
        <waitForElementVisible time="5" selector="{{CmsNewPagePageContentSection.header}}" stepKey="waitForContentHeader" />
        <waitForElementNotVisible time="10" selector="{{CmsPageSection.spinner}}" stepKey="waitForCmsPageSpinner" />
        <click selector="{{CmsNewPagePageContentSection.header}}" stepKey="clickExpandContent"/>
        <waitForElementVisible time="10" selector="{{PageBuilderRowSection.row}}" stepKey="waitForPageBuilderRow" />
        <actionGroup ref="openPageBuilderEditColumnPanel2" stepKey="openEditPanel2AfterSave"/>
        <actionGroup ref="seeInFieldSlideOutProperty" stepKey="seePageBuilderAppearanceProperty">
            <argument name="property" value="PageBuilderBackgroundAppearancePropertyCentered"/>
        </actionGroup>
        <actionGroup ref="seeInFieldSlideOutProperty" stepKey="seePageBuilderAppearanceMinHeightProperty">
            <argument name="property" value="PageBuilderAppearanceMinHeightProperty_300"/>
        </actionGroup>
        <actionGroup ref="seeInFieldSlideOutProperty" stepKey="seeBackgroundColorProperty">
            <argument name="property" value="PageBuilderBackgroundColorProperty_FF5A5F"/>
        </actionGroup>
        <actionGroup ref="saveEditPanelSettings" stepKey="saveEditPanelSettingsWithoutModifying"/>
        <actionGroup ref="saveCmsPage" stepKey="saveCmsPage"/>
        <amOnPage url="{{PageBuilderFirstColumnInStage.pageName}}" stepKey="amOnPageBuilderPage"/>
        <seeElement selector="{{ColumnsOnFrontend.column1Height}}" stepKey="seeColumn1MinHeightApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column1Appearance}}"  stepKey="seeColumn1AppearanceApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column1BackgroundColorPeacock}}"  stepKey="seeColumn1BackgroundColorApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2Height300}}" stepKey="seeColumn2MinHeightApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2Appearance}}"  stepKey="seeColumn2AppearanceApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2BackgroundColorSalmon}}"  stepKey="seeColumn2BackgroundColorApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column3Height200}}" stepKey="seeColumn3MinHeightApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column3Appearance}}"  stepKey="seeColumn3AppearanceApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column3BackgroundColorGrey}}"  stepKey="seeColumn3BackgroundColorApplied"/>
    </test>
    <test name="ColumnHasAdvancedFormSection">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Column Configuration MAGETWO-66176"/>
            <title value="Column has Advanced form section"/>
            <description value="A user should be able to configure advanced settings for a column"/>
            <severity value="CRITICAL"/>
            <testCaseId value="MAGETWO-84275"/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <actionGroup ref="addPageBuilderPageTitle" stepKey="enterPageTitle1">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToStage" stepKey="dragColumnIntoStage">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <actionGroup ref="openPageBuilderEditColumnPanel" stepKey="openEditPanel"/>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMask"/>
        <waitForElementVisible time="3" selector="{{AdvancedForm.advancedSectionName}}" stepKey="waitForAdvancedForm"/>
        <seeElement selector="{{AdvancedForm.advancedSectionName}}" stepKey="seeAdvancedFormSection"/>
        <click selector="{{AdvancedForm.advancedSectionName}}" stepKey="clickAdvancedFormSection"/>

        <!-- Check for alignment -->
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeAdvancedAlignmentProperty">
            <argument name="property" value="PageBuilderAdvancedAlignmentProperty"/>
        </actionGroup>
        <!-- Check for border -->
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeAdvancedBorderProperty">
            <argument name="property" value="PageBuilderAdvancedBorderProperty"/>
        </actionGroup>
        <seeOptionIsSelected userInput="{{PageBuilderAdvancedBorderProperty.value}}" selector="{{AdvancedForm.advancedBorder}}" stepKey="assertDefaultBorderValue"/>
        <!-- Check for border colour -->
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeAdvancedBorderColorProperty">
            <argument name="property" value="PageBuilderAdvancedBorderColorProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelFieldIsDisabled" stepKey="seeAdvancedBorderColorPropertyIsDisabled">
            <argument name="property" value="PageBuilderAdvancedBorderColorProperty"/>
        </actionGroup>
        <!-- Check for border width -->
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeAdvancedBorderWidthProperty">
            <argument name="property" value="PageBuilderAdvancedBorderWidthProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelFieldIsDisabled" stepKey="seeAdvancedBorderWidthPropertyIsDisabled">
            <argument name="property" value="PageBuilderAdvancedBorderWidthProperty"/>
        </actionGroup>
        <!-- Check for border radius -->
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeAdvancedBorderRadiusProperty">
            <argument name="property" value="PageBuilderAdvancedBorderRadiusProperty"/>
        </actionGroup>
        <seeInField userInput="0" selector="{{AdvancedForm.advancedBorderRadius}}" stepKey="assertBorderRadiusDefaultValue"/>
        <!-- Check for class field -->
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeAdvancedCssClassesProperty">
            <argument name="property" value="PageBuilderAdvancedCssClassesProperty"/>
        </actionGroup>
        <!-- Check for margins & paddings -->
        <actionGroup ref="validateSlideOutPanelField" stepKey="seeAdvancedMarginsAndPaddingProperty">
            <argument name="property" value="PageBuilderAdvancedMarginsAndPaddingProperty"/>
        </actionGroup>

        <!-- Check border fields become enabled when changing border -->
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterAdvancedBorderProperty">
            <argument name="property" value="PageBuilderAdvancedBorderPropertyDotted"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelFieldIsNotDisabled" stepKey="seeAdvancedBorderColorPropertyIsNotDisabled">
            <argument name="property" value="PageBuilderAdvancedBorderColorProperty"/>
        </actionGroup>
        <actionGroup ref="validateSlideOutPanelFieldIsNotDisabled" stepKey="seeAdvancedBorderWidthPropertyIsNotDisabled">
            <argument name="property" value="PageBuilderAdvancedBorderWidthProperty"/>
        </actionGroup>
        <!-- Validate the default values in the fields -->
        <seeInField userInput="{{PageBuilderAdvancedBorderWidthProperty.value}}" selector="{{AdvancedForm.advancedBorderWidth}}" stepKey="assertBorderWidthDefaultValue"/>

        <!-- Add test data into form -->
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterAdvancedBorderColorProperty">
            <argument name="property" value="PageBuilderAdvancedBorderColorProperty_ffffff"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterAdvancedBorderWidthProperty">
            <argument name="property" value="PageBuilderAdvancedBorderWidthProperty10"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterAdvancedBorderRadiusProperty">
            <argument name="property" value="PageBuilderAdvancedBorderRadiusProperty12"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelField" stepKey="enterAdvancedCssClassesProperty">
            <argument name="property" value="PageBuilderAdvancedCssClassesProperty"/>
        </actionGroup>
        <actionGroup ref="selectSlideOutPanelField" stepKey="enterAdvancedAlignmentProperty">
            <argument name="property" value="PageBuilderAdvancedAlignmentProperty"/>
        </actionGroup>
        <actionGroup ref="fillSlideOutPanelFieldMarginsAndPadding" stepKey="enterAdvancedMarginsAndPaddingProperty">
            <argument name="property" value="PageBuilderAdvancedMarginsAndPaddingProperty"/>
        </actionGroup>

        <!-- Save form data -->
        <actionGroup ref="saveEditPanelSettings" stepKey="saveRowEditPanelSettings"/>
        <actionGroup ref="saveAndContinueEditCmsPage" stepKey="saveAndContinueEditCmsPage"/>
        <see userInput="{{PageBuilderPageTitle.pageName}}" selector="{{CmsPageSection.cmsPageTitle}}" stepKey="assertTitleSavedCmsPage"/>
        <click selector="{{CmsNewPagePageContentSection.header}}" stepKey="clickExpandContent"/>

        <!-- Validate form data has been persisted in the advanced section -->
        <actionGroup ref="openPageBuilderEditPanel" stepKey="openSavedEditMenuOnStage">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <waitForElementVisible time="2" selector="{{AdvancedForm.advancedSectionName}}" stepKey="waitForSavedAdvancedForm"/>
        <seeElement selector="{{AdvancedForm.advancedSectionName}}" stepKey="seeSavedAdvancedFormSection"/>
        <click selector="{{AdvancedForm.advancedSectionName}}" stepKey="clickSavedAdvancedFormSection"/>
        <seeOptionIsSelected userInput="{{PageBuilderAdvancedAlignmentProperty.value}}" selector="{{AdvancedForm.advancedAlignment}}" stepKey="assertAlignmentSavedInColumn"/>
        <seeOptionIsSelected userInput="{{PageBuilderAdvancedBorderPropertyDotted.value}}" selector="{{AdvancedForm.advancedBorder}}" stepKey="assertBorderSavedInColumn"/>
        <seeInField userInput="{{PageBuilderAdvancedBorderColorProperty_ffffff.value}}" selector="{{AdvancedForm.advancedBorderColor}}" stepKey="assertBorderColorSavedInColumn"/>
        <seeInField userInput="{{PageBuilderAdvancedBorderWidthProperty10.value}}" selector="{{AdvancedForm.advancedBorderWidth}}" stepKey="assertBorderSizeSavedInColumn"/>
        <seeInField userInput="{{PageBuilderAdvancedBorderRadiusProperty12.value}}" selector="{{AdvancedForm.advancedBorderRadius}}" stepKey="assertBorderRadiusSavedInColumn"/>
        <seeInField userInput="{{PageBuilderAdvancedCssClassesProperty.value}}" selector="{{AdvancedForm.advancedCssClasses}}" stepKey="assertCSSClassesSavedInColumn"/>
        <seeInField userInput="{{PageBuilderAdvancedMarginsAndPaddingProperty.marginTop}}" selector="{{AdvancedForm.advancedMarginTop}}" stepKey="assertMarginTopSavedInColumn"/>
        <seeInField userInput="{{PageBuilderAdvancedMarginsAndPaddingProperty.marginRight}}" selector="{{AdvancedForm.advancedMarginRight}}" stepKey="assertMarginRightSavedInColumn"/>
        <seeInField userInput="{{PageBuilderAdvancedMarginsAndPaddingProperty.marginLeft}}" selector="{{AdvancedForm.advancedMarginLeft}}" stepKey="assertMarginLefSavedInColumn"/>
        <seeInField userInput="{{PageBuilderAdvancedMarginsAndPaddingProperty.marginBottom}}" selector="{{AdvancedForm.advancedMarginBottom}}" stepKey="assertMarginBottomSavedInColumn"/>
        <seeInField userInput="{{PageBuilderAdvancedMarginsAndPaddingProperty.paddingTop}}" selector="{{AdvancedForm.advancedPaddingTop}}" stepKey="assertPaddingTopSavedInColumn"/>
        <seeInField userInput="{{PageBuilderAdvancedMarginsAndPaddingProperty.paddingRight}}" selector="{{AdvancedForm.advancedPaddingRight}}" stepKey="assertPaddingRightSavedInColumn"/>
        <seeInField userInput="{{PageBuilderAdvancedMarginsAndPaddingProperty.paddingLeft}}" selector="{{AdvancedForm.advancedPaddingLeft}}" stepKey="assertPaddingLefSavedInColumn"/>
        <seeInField userInput="{{PageBuilderAdvancedMarginsAndPaddingProperty.paddingBottom}}" selector="{{AdvancedForm.advancedPaddingBottom}}" stepKey="assertPaddingBottomSavedInColumn"/>

        <!-- Validate the correct styles have been applied to the front-end -->
        <amOnPage url="column{{PageBuilderPageTitle.pageName}}" stepKey="amOnPageBuilderPage"/>
        <waitForElementVisible time="2" selector="{{ColumnsOnFrontend.columnDisplay}}" stepKey="waitForFrontEndColumn"/>
        <seeElement selector="{{ColumnsOnFrontend.columnTextAlign}}" stepKey="seeColumnTextAlignStyle"/>
        <seeElement selector="{{ColumnsOnFrontend.columnBorder}}" stepKey="seeColumnBorderStyle"/>
        <seeElement selector="{{ColumnsOnFrontend.columnBorderRadius}}" stepKey="seeColumnBorderRadiusStyle"/>
        <seeElement selector="{{ColumnsOnFrontend.columnMargin}}" stepKey="seeColumnMarginStyle"/>
        <seeElement selector="{{ColumnsOnFrontend.columnPadding}}" stepKey="seeColumnPaddingStyle"/>
        <seeElement selector="{{ColumnsOnFrontend.columnClass}}" stepKey="seeColumnClass"/>
    </test>
    <test name="RemovingColumnDistributesWidth">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Delete Columns From Container MAGETWO-83556"/>
            <title value="Column Width Distribution"/>
            <description value="Removing a column distributes column widths"/>
            <severity value="CRITICAL"/>
            <testCaseId value=""/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragFirstTwoColumns">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="containerBlockType" value="PageBuilderRowContentBlock"/>
            <argument name="containerTarget" value="PageBuilderFirstRowInStage"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragThirdColumn">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="containerBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="containerTarget" value="PageBuilderFirstColumnInStage" />
        </actionGroup>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.widthOneSixth)}}" stepKey="seeFirstColumnWidth"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderSecondColumnInStage.index, PageBuilderColumnStyles.widthOneThird)}}" stepKey="seeSecondColumnWidth"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderThirdColumnInStage.index, PageBuilderColumnStyles.widthHalf)}}" stepKey="seeThirdColumnWidth"/>
        <actionGroup ref="removeContentBlockFromStage" stepKey="removeColumn1">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
        </actionGroup>
        <waitForLoadingMaskToDisappear stepKey="waitForLoadingMask"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderFirstColumnInStage.index, PageBuilderColumnStyles.widthHalf)}}" stepKey="seeFirstColumnWidthDistributed"/>
        <seeElement selector="{{PageBuilderColumnSection.columnStyle(PageBuilderSecondColumnInStage.index, PageBuilderColumnStyles.widthHalf)}}" stepKey="seeSecondColumnWidthDistributed"/>
    </test>
    <test name="ColumnFullHeightShowsOnFrontend">
        <annotations>
            <features value="PageBuilder Column MAGETWO-83768"/>
            <stories value="Column Configuration MAGETWO-71365"/>
            <title value="Bluefoot columns to be the same height in the row"/>
            <description value="Validate columns are the same height on the frontend"/>
            <severity value="CRITICAL"/>
            <group value="pagebuilder"/>
        </annotations>
        <before>
            <actionGroup ref="LoginAsAdmin" stepKey="loginAsAdmin"/>
            <actionGroup ref="EnabledWYSIWYG" stepKey="enableWYSIWYG"/>
            <actionGroup ref="navigateToAPageWithPageBuilder" stepKey="navigateToAPageWithPageBuilder"/>
            <actionGroup ref="switchToPageBuilderStage" stepKey="switchToPageBuilderStage"/>
        </before>
        <after>
            <actionGroup ref="DisabledWYSIWYG" stepKey="disableWYSIWYG"/>
            <amOnPage url="admin/admin/auth/logout" stepKey="amOnLogoutPage"/>
            <waitForPageLoad stepKey="waitForAdminLoginPageLoad"/>
        </after>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragFirstColumn">
            <argument name="contentBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="containerBlockType" value="PageBuilderRowContentBlock"/>
            <argument name="containerTarget" value="PageBuilderFirstRowInStage"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragHeader1ToFirstColumn">
            <argument name="contentBlockType" value="PageBuilderHeaderContentBlock"/>
            <argument name="containerBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="containerTarget" value="PageBuilderFirstColumnInStage"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragHeader2ToFirstColumn">
            <argument name="contentBlockType" value="PageBuilderHeaderContentBlock"/>
            <argument name="containerBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="containerTarget" value="PageBuilderFirstColumnInStage"/>
        </actionGroup>
        <actionGroup ref="dragContentBlockToContainer" stepKey="dragHeader3ToFirstColumn">
            <argument name="contentBlockType" value="PageBuilderHeaderContentBlock"/>
            <argument name="containerBlockType" value="PageBuilderColumnContentBlock"/>
            <argument name="containerTarget" value="PageBuilderFirstColumnInStage"/>
        </actionGroup>
        <fillField selector="{{CmsPageSection.pageTitle}}" userInput="{{PageBuilderFirstColumnInStage.pageName}}" stepKey="enterPageTitle"/>
        <wait time="1" stepKey="wait1"/>
        <actionGroup ref="saveCmsPage" stepKey="saveCmsPage"/>
        <amOnPage url="{{PageBuilderFirstColumnInStage.pageName}}" stepKey="amOnPageBuilderPage1"/>
        <seeElement selector="{{ColumnsOnFrontend.column1HeightFull}}" stepKey="seeColumn1FullHeightApplied"/>
        <seeElement selector="{{ColumnsOnFrontend.column2HeightFull}}" stepKey="seeColumn2FullHeightApplied"/>
    </test>
</tests>
